<<<<<<< HEAD
## ğŸ“¡ ì›¹ ì†Œì¼“(WebSocket)ì´ë€?

### 1. ê°œìš”

ì›¹ ì†Œì¼“ì€ **ì›¹ì„ ìœ„í•œ ì–‘ë°©í–¥ í†µì‹  í”„ë¡œí† ì½œ**ì…ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì›¹ì€ HTTP ê¸°ë°˜ì˜ ìš”ì²­/ì‘ë‹µ ë°©ì‹ìœ¼ë¡œ í†µì‹ í•˜ì§€ë§Œ, ì›¹ ì†Œì¼“ì„ ì‚¬ìš©í•˜ë©´ **ë¸Œë¼ìš°ì €ì™€ ì„œë²„ ê°„ì˜ ì‹¤ì‹œê°„, ì „ì´ì¤‘ í†µì‹ **ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

- TCPëŠ” ë³¸ì§ˆì ìœ¼ë¡œ ì–‘ë°©í–¥ í†µì‹ ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, ì›¹ì— ì§ì ‘ ë…¸ì¶œë˜ë©´ ë³´ì•ˆìƒ ìœ„í—˜ì´ í½ë‹ˆë‹¤.  
- ê·¸ë˜ì„œ ì›¹ì—ì„œëŠ” TCP ëŒ€ì‹  **HTTP ìœ„ì—ì„œ ì‘ë™í•˜ëŠ” ì•ˆì „í•œ ì–‘ë°©í–¥ í†µì‹  ë°©ì‹**, ì¦‰ ì›¹ ì†Œì¼“ì´ ì‚¬ìš©ë©ë‹ˆë‹¤.

---

### 2. ì›¹ ì†Œì¼“ì€ ì–´ë–»ê²Œ ì‘ë™í• ê¹Œ?

#### ğŸ§¾ ì›¹ ì†Œì¼“ í•¸ë“œì…°ì´í¬ (Handshake)

1. í´ë¼ì´ì–¸íŠ¸ê°€ HTTP í”„ë¡œí† ì½œì„ ì‚¬ìš©í•´ ì›¹ ì†Œì¼“ ì—°ê²°ì„ ìš”ì²­í•©ë‹ˆë‹¤:
   ```
   GET /chat HTTP/1.1
   Host: example.com
   Upgrade: websocket
   Connection: Upgrade
   Sec-WebSocket-Key: <ëœë¤ í‚¤>
   Sec-WebSocket-Version: 13
   ```

2. ì„œë²„ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ë‹µí•˜ì—¬ í”„ë¡œí† ì½œì„ `HTTP`ì—ì„œ `WebSocket`ìœ¼ë¡œ ì „í™˜í•©ë‹ˆë‹¤:
   ```
   HTTP/1.1 101 Switching Protocols
   Upgrade: websocket
   Connection: Upgrade
   Sec-WebSocket-Accept: <ì„œëª…ëœ í‚¤>
   ```

3. ì´í›„, HTTPëŠ” ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•Šê³  TCP ê¸°ë°˜ì˜ ì›¹ ì†Œì¼“ ì—°ê²°ë¡œ ëŒ€ì²´ë©ë‹ˆë‹¤. **ì–‘ë°©í–¥ í†µì‹ **ì´ ê°€ëŠ¥í•œ ìƒíƒœê°€ ë©ë‹ˆë‹¤.

---

### 3. ì›¹ ì†Œì¼“ ì£¼ì†Œ ì²´ê³„

- ë¹„ë³´ì•ˆ: `ws://example.com`
- ë³´ì•ˆ: `wss://example.com`

---

## ğŸ”„ ì›¹ ì†Œì¼“ vs HTTP

| íŠ¹ì§•                 | HTTP                              | WebSocket                        |
|----------------------|-----------------------------------|----------------------------------|
| í†µì‹  ë°©ì‹            | ìš”ì²­/ì‘ë‹µ ê¸°ë°˜ (ë‹¨ë°©í–¥)          | ì „ì´ì¤‘ í†µì‹  (ì–‘ë°©í–¥)            |
| ì—°ê²° ìœ ì§€ ì—¬ë¶€       | ê¸°ë³¸ì ìœ¼ë¡œ ì—°ê²° í•´ì œë¨           | ì—°ê²°ì„ ì§€ì†í•¨                   |
| ì‹¤ì‹œê°„ í†µì‹  ì§€ì›     | ë¶ˆí¸í•¨ (í´ë§ í•„ìš”)               | ì‹¤ì‹œê°„ í†µì‹ ì— ì í•©              |
| ë°©í™”ë²½ ì¹œí™”ì„±        | ë†’ìŒ                             | ìƒëŒ€ì ìœ¼ë¡œ ë†’ìŒ (HTTP ê¸°ë°˜)     |
| ìƒíƒœ ìœ ì§€ ì—¬ë¶€       | ë¬´ìƒíƒœ(stateless)                | ìƒíƒœ ìœ ì§€(stateful)            |
| ì„œë²„ í‘¸ì‹œ            | ë¶ˆê°€ëŠ¥ / í´ë§ í•„ìš”               | ê°€ëŠ¥                             |

---

## ğŸ›  ì›¹ ì†Œì¼“ ì‚¬ìš© ì‚¬ë¡€

- ì±„íŒ… ì• í”Œë¦¬ì¼€ì´ì…˜ (WhatsApp, Discord ë“±)
- ì‹¤ì‹œê°„ í”¼ë“œ (íŠ¸ìœ„í„° ìŠ¤íŠ¸ë¦¬ë°, ë‰´ìŠ¤ ì†ë³´)
- ë©€í‹°í”Œë ˆì´ì–´ ê²Œì„
- ì‹¤ì‹œê°„ ì•Œë¦¼ ì‹œìŠ¤í…œ (Push Notification)
- ê¸ˆìœµ ê±°ë˜ ì‹œìŠ¤í…œ (ì£¼ì‹ ì‹œì„¸ ë“±)

---

## âœ… ì¥ì 

- **ì‹¤ì‹œê°„ ì–‘ë°©í–¥ í†µì‹  ê°€ëŠ¥**
- **ë‚®ì€ ì˜¤ë²„í—¤ë“œ**: HTTP ìš”ì²­/ì‘ë‹µ ë°˜ë³µì´ ì—†ìŒ
- **ë¹ ë¥¸ ì‘ë‹µ ì‹œê°„**
- **ë°©í™”ë²½ ìš°íšŒ ê°€ëŠ¥ì„± ë†’ìŒ**: HTTPë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ê¸° ë•Œë¬¸
- **ì„œë²„ í‘¸ì‹œ ê¸°ëŠ¥ ë‚´ì¥**

---

## âš  ë‹¨ì 

- **ìƒíƒœ ìœ ì§€**: ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì˜ ì—°ê²° ìƒíƒœë¥¼ ê´€ë¦¬í•´ì•¼ í•¨
- **í”„ë¡ì‹œ/ì¤‘ê°„ ì¥ë¹„ ì²˜ë¦¬ ë³µì¡ì„±**: WebSocketì„ ì œëŒ€ë¡œ ì§€ì›í•˜ì§€ ì•ŠëŠ” ê²½ìš°ë„ ìˆìŒ
- **ìˆ˜í‰ í™•ì¥ ì–´ë ¤ì›€**: ì—°ê²°ì´ ì˜¤ë˜ ì§€ì†ë˜ê¸° ë•Œë¬¸ì— ë¡œë“œ ë°¸ëŸ°ì‹± ë³µì¡
- **ìœ ì§€ ê´€ë¦¬ ì´ìŠˆ**: Ping/Pong ë“± keep-alive ì²˜ë¦¬ê°€ í•„ìš”
- **ì•ˆì •ì„± ë¬¸ì œ**: ë¼ìš°í„°/ë°©í™”ë²½ì— ì˜í•´ ì—°ê²°ì´ ì˜ˆê¸°ì¹˜ ì•Šê²Œ ëŠê¸¸ ìˆ˜ ìˆìŒ

---

## ğŸ“Œ ì›¹ ì†Œì¼“ì€ ì–¸ì œ ì¨ì•¼ í•˜ë‚˜?

- **ì‹¤ì‹œê°„ì„±**ì´ ì¤‘ìš”í•  ë•Œ
- ì„œë²„ê°€ **ëŠ¥ë™ì ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì•Œë¦¼ì„ ì „ì†¡í•´ì•¼ í•  ë•Œ**
- ì§€ì†ì ì¸ ì—°ê²°ì´ í—ˆìš©ë˜ê³ , ìƒíƒœ ìœ ì§€ê°€ ê°€ëŠ¥í•  ë•Œ

ğŸ’¡ ë‹¨, ë‹¨ìˆœí•œ ì›¹ ì„œë¹„ìŠ¤ë‚˜ ë¶ˆíŠ¹ì • ë‹¤ìˆ˜ì—ê²Œ ë¹ˆë²ˆíˆ ì—°ê²°ì´ ë°œìƒí•˜ëŠ” ì„œë¹„ìŠ¤ì—ëŠ” **SSE(Server-Sent Events)** ë˜ëŠ” **HTTP Long Polling**ë„ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
=======
## ì›¹ ì†Œì¼“ ê°•ì˜ ìš”ì•½

### 1. ì›¹ ì†Œì¼“ì´ë€?
ì›¹ ì†Œì¼“(WebSocket)ì€ ì›¹ì„ ìœ„í•œ ì–‘ë°©í–¥ í†µì‹  ê¸°ìˆ ë¡œ, í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ì˜ ì§€ì†ì ì¸ ë°ì´í„° êµí™˜ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤. HTTPë¥¼ í†µí•´ ì—°ê²°ì„ ì„¤ì •í•œ í›„, TCP ê¸°ë°˜ì˜ ì§€ì†ì ì¸ í†µì‹ ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œë©ë‹ˆë‹¤.

### 2. ì›¹ ì†Œì¼“ì˜ í•„ìš”ì„±
- TCPëŠ” ê°•ë ¥í•˜ì§€ë§Œ, ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ì‚¬ìš©í•˜ê¸° ì–´ë ¤ì›€
- ì›¹ ì†Œì¼“ì„ ì´ìš©í•˜ë©´ HTTP ê¸°ë°˜ ë³´ì•ˆ í™˜ê²½ì—ì„œ TCPì˜ ì–‘ë°©í–¥ í†µì‹ ì„ í™œìš©í•  ìˆ˜ ìˆìŒ

### 3. ì›¹ ì†Œì¼“ ì—°ê²° ê³¼ì •
1. **í´ë¼ì´ì–¸íŠ¸ê°€ HTTP ìš”ì²­ì„ ë³´ëƒ„** (`Upgrade: websocket` í¬í•¨)
2. **ì„œë²„ê°€ ì‘ë‹µí•˜ì—¬ ì—°ê²°ì„ ì—…ê·¸ë ˆì´ë“œí•¨** (`101 Switching Protocols` ë°˜í™˜)
3. **ì–‘ë°©í–¥ ë°ì´í„° ì „ì†¡ ê°€ëŠ¥** (ì—°ê²°ì´ ìœ ì§€ë˜ë©° ë©”ì‹œì§€ë¥¼ ì£¼ê³ ë°›ìŒ)

### 4. ì›¹ ì†Œì¼“ì˜ ì£¼ìš” ì‚¬ìš© ì‚¬ë¡€
- **ì‹¤ì‹œê°„ ì±„íŒ… (ì˜ˆ: WhatsApp, Discord)**
- **ë¼ì´ë¸Œ í”¼ë“œ ë° ì•Œë¦¼ (ì˜ˆ: Twitch, ë‰´ìŠ¤ ì—…ë°ì´íŠ¸)**
- **ë©€í‹°í”Œë ˆì´ì–´ ê²Œì„**
- **ì‹¤ì‹œê°„ ë°ì´í„° ëª¨ë‹ˆí„°ë§ ë° ëŒ€ì‹œë³´ë“œ**

### 5. ì›¹ ì†Œì¼“ì˜ ì¥ë‹¨ì 
#### âœ… ì¥ì 
- **ì „ì´ì¤‘(Full-Duplex) í†µì‹ **: ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ ë™ì‹œì— ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆìŒ
- **ë‚®ì€ ì˜¤ë²„í—¤ë“œ**: HTTP ìš”ì²­-ì‘ë‹µ ë°©ì‹ë³´ë‹¤ íš¨ìœ¨ì 
- **ë°©í™”ë²½ ì¹œí™”ì **: ê¸°ë³¸ì ìœ¼ë¡œ HTTP í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—°ê²° ìœ ì§€ ê°€ëŠ¥

#### âŒ ë‹¨ì 
- **í”„ë¡ì‹œ ë° ë°©í™”ë²½ ë¬¸ì œ**: ì¼ë¶€ ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì—ì„œ ì°¨ë‹¨ë  ìˆ˜ ìˆìŒ
- **ì—°ê²° ìœ ì§€ ë¹„ìš©**: ì„œë²„ê°€ ì§€ì†ì ìœ¼ë¡œ ì—°ê²°ì„ ê´€ë¦¬í•´ì•¼ í•¨
- **ë¡œë“œ ë°¸ëŸ°ì‹± ì–´ë ¤ì›€**: ìƒíƒœ ìœ ì§€(Stateful) ë°©ì‹ì´ë¼ ìˆ˜í‰ í™•ì¥ì— ë¶ˆë¦¬í•¨

### 6. ì›¹ ì†Œì¼“ vs. ë‹¤ë¥¸ ê¸°ìˆ 
| ê¸°ìˆ  | íŠ¹ì§• | ì£¼ìš” ì‚¬ìš© ì‚¬ë¡€ |
|------|------|--------------|
| ì›¹ ì†Œì¼“ | ì–‘ë°©í–¥, ì‹¤ì‹œê°„ | ì±„íŒ…, ê²Œì„, ì‹¤ì‹œê°„ ì•Œë¦¼ |
| HTTP í´ë§ | ì£¼ê¸°ì ìœ¼ë¡œ ìš”ì²­ | ìƒíƒœ ì—…ë°ì´íŠ¸, ê°„ë‹¨í•œ ì•Œë¦¼ |
| SSE(Server-Sent Events) | ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œ ì¼ë°©í–¥ ì „ì†¡ | ë‰´ìŠ¤ í”¼ë“œ, ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ |

### 7. ì›¹ ì†Œì¼“ ì½”ë“œ ì˜ˆì œ (Python)
#### ì„œë²„ ì½”ë“œ (Python + websockets ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©)
```python
import asyncio
import websockets

connected_clients = set()

async def handler(websocket, path):
    # í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ê´€ë¦¬
    connected_clients.add(websocket)
    try:
        async for message in websocket:
            # ì—°ê²°ëœ ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë©”ì‹œì§€ ì „ì†¡
            for client in connected_clients:
                if client != websocket:
                    await client.send(f"ì„œë²„ ì‘ë‹µ: {message}")
    finally:
        # ì—°ê²° ì¢…ë£Œ ì‹œ í´ë¼ì´ì–¸íŠ¸ ì œê±°
        connected_clients.remove(websocket)

# ì›¹ ì†Œì¼“ ì„œë²„ ì‹¤í–‰
start_server = websockets.serve(handler, "localhost", 8080)
asyncio.get_event_loop().run_until_complete(start_server)
asyncio.get_event_loop().run_forever()
```

#### í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ
```python
import asyncio
import websockets

async def client():
    async with websockets.connect("ws://localhost:8080") as websocket:
        await websocket.send("ì•ˆë…•í•˜ì„¸ìš”!")
        response = await websocket.recv()
        print(f"ì„œë²„ë¡œë¶€í„° ìˆ˜ì‹ ëœ ë©”ì‹œì§€: {response}")

asyncio.run(client())
```

### 8. ê²°ë¡ 
ì›¹ ì†Œì¼“ì€ ì‹¤ì‹œê°„ ë°ì´í„° ì²˜ë¦¬ë¥¼ ìœ„í•œ ê°•ë ¥í•œ ê¸°ìˆ ì´ì§€ë§Œ, ëª¨ë“  ê²½ìš°ì— ì í•©í•œ ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤. í•„ìš”ì— ë”°ë¼ SSE, í´ë§ ë“±ì˜ ëŒ€ì•ˆì„ ê²€í† í•˜ê³ , ì„±ëŠ¥ ë° í™•ì¥ì„±ì„ ê³ ë ¤í•˜ì—¬ ìµœì ì˜ ê¸°ìˆ ì„ ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤.

>>>>>>> refs/remotes/origin/main
